import e,{useState as t,useRef as n,useMemo as r,useCallback as o,useEffect as l}from"react";import i from"../shared/Swiper/index.js";import{cssDecorator as c}from"@front-toolkit/utils";import{builtInThemes as u}from"./types.js";import a from"./Header/index.js";import s from"./Body/index.js";import d from"./Carousel.module.scss.js";import{IconArrowLeft as m,IconArrowRight as f}from"../icons/defaultIcons.js";var h=c(d),p=function(c){var p=c.title,v=c.theme,b=c.content,g=c.fillHeader,E=c.invertTitle,k=c.invertControls,x=c.smallSlides,C=c.twoSlides,_=c.href,w=c.dataTestId,S=c.customLink,y=c.isMourning,T=c.onChange,j=c.onControlsClick,M=c.onTitleClick,N="recommender"===v,L=t(null),B=L[0],H=L[1],D=t(null),I=D[0],R=D[1],F=t(b.length)[0],P=t(0),W=P[0],X=P[1],q=t(0),z=q[0],A=q[1],G=t(0),J=G[0],K=G[1],O=n(0),Q=n(b.length-1),U=r((function(){return x?188:244}),[x]),V=r((function(){return C?2:4}),[C]),Y=o((function(e){X(e*V*U),K(e),O.current=e*V,Q.current=e*V+V-1,T&&T(O.current,Q.current)}),[U,V,T]),Z=o((function(){Y(J+1)}),[J,Y]),$=o((function(){Y(J-1)}),[J,Y]);l((function(){var e=Math.ceil(F/V);A(e);var t=Math.floor(O.current/V);K(t),X(t*V*U),O.current=t*V,Q.current=t*V+V-1,T&&T(O.current,Q.current)}),[F,V,U,T]);var ee=r((function(){return h("carousel",{small_slides:x,two_slides:C,fill_header:g,recommender:N,mourning:y})}),[x,C,g,N,y]),te=u[v]||v,ne=r((function(){return{"--ds-carousel-background":te.background}}),[te.background]),re=r((function(){return{execute:Z,canExecute:J<z-1}}),[J,z,Z]),oe=r((function(){return{execute:$,canExecute:J>0}}),[J,$]),le=o((function(e){e.preventDefault()}),[]),ie=o((function(e){if(B&&N){var t=B.getBoundingClientRect(),n=t.width,r=t.left,o=n/2,l=e.clientX-r<o;return R(l?"left":"right")}return R(null)}),[B,N]),ce=o((function(){R(null)}),[]),ue=o((function(){j&&j(),oe.execute()}),[j,oe]),ae=o((function(){j&&j(),re.execute()}),[j,re]);return e.createElement("div",{ref:H,"data-test-id":w,className:ee,style:N?void 0:ne,onDragStart:le},e.createElement(a,{title:p,theme:te,switchToNextStep:re,switchToPreviousStep:oe,invertTitle:E,invertControls:k,smallSlides:x,href:_,customLink:S,onControlsClick:j,onTitleClick:M,hideButtons:N}),e.createElement("div",{className:h("body_wrapper",{fill_header:g,fill_body_background:N}),style:N?ne:void 0},e.createElement(i,{tag:"div",onSwipedLeft:function(){J<z-1&&Z()},onSwipedRight:function(){J>0&&$()},threshold:50,stretch:!0},e.createElement("div",{className:d.body_inner_wrapper,onMouseMove:ie,onMouseLeave:ce},e.createElement(s,{content:b,slideWidth:U,offset:W,fillHeader:g,smallSlides:x,theme:te}),N&&e.createElement(e.Fragment,null,e.createElement("button",{className:h("button_left",{visible:"left"===I}),type:"button","aria-label":"Назад",onClick:ue,disabled:!oe.canExecute},e.createElement(m,null)),e.createElement("button",{className:h("button_right",{visible:"right"===I}),type:"button","aria-label":"Вперед",onClick:ae,disabled:!re.canExecute},e.createElement(f,null)))))))};export{p as Carousel};
//# sourceMappingURL=index.js.map
