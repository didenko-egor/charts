import e,{useState as t,useCallback as i,useEffect as o}from"react";import{createPortal as n}from"react-dom";import{ScrollBox as r}from"../shared/ScrollBox/index.js";import{cssDecorator as a}from"@front-toolkit/utils";import{DEFAULT_PROPS as s,MAX_LIST_HEIGHT as l}from"./constants.js";import m from"./SelectList/index.js";import d from"./styles.scss.js";var c=a(d),p=function(a){var p=a.isOpen,u=void 0===p?s.isOpen:p,v=a.items,f=a.activeValues,h=a.itemResetLabel,w=a.onChange,g=a.onScrollLock,x=a.onCloseDropDown,E=a.targetWidth,M=a.dataTestId,y=a.listWidth,D=void 0===y?s.listWidth:y,C=a.zIndex,z=void 0===C?s.zIndex:C,L=a.isMultiselect,b=void 0===L?s.isMultiselect:L,B=a.alignDropDown,I=void 0===B?s.alignDropDown:B,j=a.minTop,k=void 0===j?s.minTop:j,N=a.maxBottom,W=void 0===N?s.maxBottom:N,_=a.children,R=a.isMourning,S=t({opacity:0}),T=S[0],F=S[1],H=t(null),O=H[0],V=H[1],P=u&&Boolean(O),q=i((function(e){return V(e)}),[]);return o((function(){if(O&&P){var e=O.getBoundingClientRect(),t=e.left,i=e.width,o=e.top,n=window.innerHeight-W,r=Math.max(o,k),a=Math.max(n-r,0),s=Math.min(l,a),m=0;switch(I){case"right":m=i-D;break;case"center":m=(i-D)/2}F({width:D,maxHeight:s,left:Math.max(t+m,0),top:r,zIndex:z+1,opacity:1})}}),[k,W,D,O,P,I,z,R]),o((function(){if(P)return window.addEventListener("resize",x),g&&g(!0),function(){window.removeEventListener("resize",x),g&&g(!1)}}),[P,x,g]),e.createElement(e.Fragment,null,e.createElement("div",{"data-test-id":M,className:d.target_wrapper,ref:q,style:{width:E}},_),P&&n(e.createElement(e.Fragment,null,e.createElement("div",{className:d.overlay,onClick:x,style:{zIndex:z}}),e.createElement("div",{"data-test-id":M?M+"__dropdown":void 0,className:c("fixed_wrapper",{mourning:R}),style:T},e.createElement(r,{overrideWrapperClassName:d.scrollbar},e.createElement(m,{onChange:w,itemResetLabel:h,items:v,activeValues:f,isMultiselect:b,onCloseDropDown:x,isMourning:R})))),document.body))};p.defaultProps=s;var u=e.memo(p);export{p as SelectDropDown,u as default};
//# sourceMappingURL=index.js.map
