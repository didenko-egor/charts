import e,{useMemo as r,useState as t,useRef as n,useEffect as l,useCallback as i}from"react";import o from"lodash.debounce";import{getYearByScroll as a}from"../utils/index.js";import u from"./Year/index.js";import c from"./styles.scss.js";var s=function(s){var d=s.active,v=s.onYearClick,f=s.rowHeight,m=s.today,p=s.years,g=r((function(){return 5*f}),[f]),h=r((function(){return 6*f}),[f]),y=t(void 0),E=y[0],Y=y[1],F=n(null);l((function(){var e,r;if(F&&d){Y("outside");var t=null!==(e=null==d?void 0:d.getFullYear())&&void 0!==e?e:(new Date).getFullYear();null===(r=null==F?void 0:F.current)||void 0===r||r.scroll({top:(t-p[0])*f})}}),[d,f,p]);var j=i((function(){var r=[];return p.forEach((function(t){var n=new Date(t,0,1);r.push(e.createElement(u,{key:t,date:n,isActive:(null==d?void 0:d.getFullYear())===t,isToday:m.getFullYear()===t,onYearClick:v}))})),r}),[p,d,m,v]),k=o((function(){var e;E||v(a(null===(e=F.current)||void 0===e?void 0:e.scrollTop,p[0],f)),Y(void 0)}),300),w=i((function(){k()}),[k]);return l((function(){var e=F.current;return p.length>0&&(null==e||e.addEventListener("scroll",w)),function(){null==e||e.removeEventListener("scroll",w)}}),[p,E,w]),e.createElement("div",{className:c.list,ref:F},e.createElement("div",{className:c.padding,style:{height:g}}),j(),e.createElement("div",{className:c.padding,style:{height:h}}))};export{s as default};
//# sourceMappingURL=index.js.map
