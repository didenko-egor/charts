import e,{useMemo as t,useState as n,useRef as r,useEffect as o,useCallback as l}from"react";import i from"lodash.debounce";import{monthsOffset as a,getMonthByScroll as c}from"../utils/index.js";import u from"./Month/index.js";import s from"./Year/index.js";import d from"./styles.scss.js";var m=function(m){var v=m.active,f=m.locale,h=m.months,p=m.onMonthClick,g=m.rowHeight,y=m.today,E=t((function(){return 5*g}),[g]),M=t((function(){return 6*g}),[g]),j=n(void 0),k=j[0],x=j[1],N=r(null);o((function(){var e;N&&(x("outside"),null===(e=null==N?void 0:N.current)||void 0===e||e.scroll({top:a(v,h[0],g)}))}),[v,h,g]);var Y=l((function(){var t=[];return h.forEach((function(n,r){var o=n.month,l=n.year,i=new Date(l,o,1),a=y.getMonth()===o&&y.getFullYear()===l,c=(null==v?void 0:v.getMonth())===o&&(null==v?void 0:v.getFullYear())===l;0===o&&0!==r&&t.push(e.createElement(s,{key:"year-"+l,date:i})),t.push(e.createElement(u,{key:o+"-"+l,date:i,isActive:c,isToday:a,locale:f,onMonthClick:p}))})),t}),[h,y,v,f,p]),w=i((function(){var e;k||p(c(null===(e=N.current)||void 0===e?void 0:e.scrollTop,h[0],g)),x(void 0)}),300),C=l((function(){w()}),[w]);return o((function(){var e=N.current;return h.length>0&&(null==e||e.addEventListener("scroll",C)),function(){null==e||e.removeEventListener("scroll",C)}}),[h,k,C]),e.createElement("div",{className:d.monthlist,ref:N},e.createElement("div",{className:d.padding,style:{height:E}}),Y(),e.createElement("div",{className:d.padding,style:{height:M}}))};export{m as default};
//# sourceMappingURL=index.js.map
