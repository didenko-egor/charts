import{__assign as e,__rest as r}from"tslib";import t,{useRef as n,useState as o,useMemo as i,useCallback as u,useEffect as s}from"react";import{Input as a}from"../Input/index.js";import l from"./utils/getNumbers.js";import c from"./utils/formatValueByMask.js";import d from"./utils/createMask.js";import m from"./utils/getMaskSymbolsIndexes.js";import f from"./utils/checkValueInvalid.js";function p(n){var p=n.id,v=n.placeholderMask,h=n.placeholder,g=n.isError,k=n.validationFormat,y=n.onChange,b=n.inputRef,j=r(n,["id","placeholderMask","placeholder","isError","validationFormat","onChange","inputRef"]),x=o(!1),E=x[0],M=x[1],I=o({currentPosition:0,pressedKey:""}),K=I[0],R=I[1],C=o(!1),N=C[0],P=C[1],S=i((function(){return d(v)}),[v]),w=i((function(){return m(v)}),[v]),V=w.delimiterIndexes,A=w.inputValueIndexes,B=u((function(e){var r=l(e);if(y){var t=c(r,S);y(t),P(f(t,k))}M(!0)}),[S,y,k]),D=u((function(e){var r=e.target,t=e.key;"ArrowLeft"!==t&&"ArrowRight"!==t&&R({currentPosition:Number(r.selectionStart),pressedKey:t})}),[]),F=u((function(e){var r=e.target;R({currentPosition:Number(r.selectionStart),pressedKey:""})}),[]);return s((function(){if((null==b?void 0:b.current)&&E){var e=K.currentPosition,r=K.pressedKey,t=V.includes(e),n="Delete"===r,o=void 0;o="Backspace"===r||n?n?e:e-1:/\d/g.test(r)?t?Number(A.find((function(r){return r>e})))+1:e+1:e,(null==b?void 0:b.current)&&(b.current.selectionStart=o,b.current.selectionEnd=o),M(!1)}}),[K,V,E,A,b]),t.createElement(a,e({},j,{id:p,isError:N||g,inputRef:b,onChange:B,onKeyDown:D,placeholder:v||h,onContextMenu:F}))}function v(r){var o=n(null);return t.createElement(p,e({},r,{inputRef:o}))}export{p as ForwardedMaskInput,v as MaskedInput};
//# sourceMappingURL=index.js.map
