import{__assign as t,__awaiter as e,__generator as n}from"tslib";import o,{useContext as r,useCallback as i}from"react";import{IconGlobe as a}from"../../icons/index.js";import"../Dropdown/Button/index.js";import l from"../Dropdown/Item/index.js";import s from"../ContextMenu/index.js";import{TOOLTIP_INITIAL_STATE as c}from"../constants.js";import{EditorContext as u}from"../EditorContext.js";import m from"../TextEditor.module.scss.js";var p=o.memo((function(p){var d=p.currentLinkUrl,f=p.contextMenuData,x=p.setContextMenuData,v=p.resetContextData,E=p.setLinkTooltipData,w=r(u).editor,h=i((function(){f.show&&v()}),[v,f.show]),C=i((function(){var t;null===(t=window.open(d,"_blank"))||void 0===t||t.focus(),v()}),[v,d]),k=i((function(){E((function(e){return t(t({},e),{show:!0})})),x(c)}),[E,x]),b=i((function(){return e(void 0,void 0,void 0,(function(){var t,e,o;return n(this,(function(n){switch(n.label){case 0:(t=document.createElement("a")).href=d,t.text=d,e=Promise.resolve(new Blob([t.outerHTML],{type:"text/html"})),n.label=1;case 1:return n.trys.push([1,3,,5]),o=new ClipboardItem({"text/html":e}),[4,navigator.clipboard.write([o])];case 2:return n.sent(),[3,5];case 3:return n.sent(),[4,navigator.clipboard.writeText(d)];case 4:return n.sent(),[3,5];case 5:return v(),[2]}}))}))}),[d,v]),j=i((function(){return e(void 0,void 0,void 0,(function(){return n(this,(function(t){return null==w||w.chain().focus().unsetLink().run(),v(),[2]}))}))}),[w,v]);return o.createElement(s,{position:{top:f.top,left:f.left},onClose:h},o.createElement(l,{onClick:C,icon:o.createElement(a,null)},o.createElement("span",{className:m.link},d)),o.createElement(l,{onClick:k},o.createElement("span",null,"Редактировать…")),o.createElement(l,{onClick:b},o.createElement("span",null,"Скопировать")),o.createElement(l,{onClick:j},o.createElement("span",null,"Удалить")))}));p.displayName="EditorContextMenu";export{p as EditorContextMenu};
//# sourceMappingURL=index.js.map
