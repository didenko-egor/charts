import o,{useState as e,useRef as t,useCallback as n,useMemo as r,useEffect as i}from"react";import{useClickOutside as l}from"@front-toolkit/hooks";import{Input as s}from"../../Input/index.js";import{Button as a}from"../../Button/index.js";import{Form as m}from"../../shared/Form/index.js";import{IconClose as c}from"../../icons/index.js";import u from"./AddLinkTooltip.module.scss.js";var d=/^https?:\/\//,f=function(f){var p=f.position,k=p.top,v=p.left,E=f.url,h=f.onClose,x=f.onConfirm,b=e(E||""),j=b[0],y=b[1],C=e(!1),_=C[0],A=C[1],B=t(null),F=d.test(j),L=Boolean(j)&&!F,N=L&&!_;l(B,h);var g=n((function(){return y("")}),[]),w=r((function(){return[{icon:o.createElement(c,null),onClick:g,disabled:!1}]}),[g]),z=n((function(){x(j)}),[x,j]),T=function(){return A(!_)};return i((function(){return function(){B.current=null}}),[]),o.createElement("div",{className:u.link_tooltip,ref:B,style:{top:k,left:v}},o.createElement("div",{className:u.link_tooltip__body},o.createElement(m,{labelAside:!1,size:"small"},o.createElement(s,{onChange:y,value:j,icons:j?w:void 0,onKeyDown:function(o){"Enter"!==o.key||L||z()},autoFocus:!0,onFocus:T,onBlur:T,label:"URL",isError:N,showHint:N,hintMessage:"Введите полный адрес ссылки"})),j&&o.createElement(a,{text:"Применить",size:"small",onClick:z,stretch:!0,disabled:!F})))};f.displayName="AddLinkTooltip";var p=o.memo(f);export{p as default};
//# sourceMappingURL=index.js.map
