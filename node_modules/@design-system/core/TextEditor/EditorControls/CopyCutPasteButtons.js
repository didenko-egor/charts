import{__awaiter as t,__generator as e}from"tslib";import n,{useContext as o,useCallback as r}from"react";import{IconCopy as i,IconCut as a,IconClipboard as c}from"../../icons/index.js";import{isSSR as l}from"@front-toolkit/utils";import{EditorContext as u}from"../EditorContext.js";import s from"../Button/index.js";import d from"../Group/index.js";import m from"../utils/PastedTextFormatter.js";var p=l?"":new RegExp(window.location.origin+"/","g"),f=!!l||-1!==window.navigator.userAgent.indexOf("Firefox"),v=function(l){var v=l.controls,x=o(u),h=x.editor,C=x.disabled,E=r((function(){return t(void 0,void 0,void 0,(function(){return e(this,(function(t){return document.execCommand("copy"),null==h||h.chain().focus(),[2]}))}))}),[h]),b=r((function(){return t(void 0,void 0,void 0,(function(){return e(this,(function(t){return document.execCommand("cut"),null==h||h.commands.deleteSelection(),null==h||h.chain().focus(),[2]}))}))}),[h]),g=r((function(){return t(void 0,void 0,void 0,(function(){var t,n,o,r;return e(this,(function(e){switch(e.label){case 0:return e.trys.push([0,4,,5]),[4,navigator.clipboard.read()];case 1:return[4,e.sent()[0].getType("text/html")];case 2:return t=e.sent(),o=m,[4,t.text()];case 3:return n=o.apply(void 0,[e.sent(),v]),r=n.replace(/<p.*?>/i,"").replace(/<\/p>/i,"").replace(p,""),n&&(null==h||h.commands.insertContent(r),null==h||h.chain().focus()),[3,5];case 4:return e.sent(),console.warn("Nothing to read from the Clipboard"),[3,5];case 5:return[2]}}))}))}),[h,v]);return n.createElement(d,null,n.createElement(s,{onClick:E,disabled:C,"data-test-action":"copy"},n.createElement(i,null)),n.createElement(s,{onClick:b,disabled:C,"data-test-action":"cut"},n.createElement(a,null)),!f&&n.createElement(s,{onClick:g,disabled:C,"data-test-action":"paste"},n.createElement(c,null)))};v.displayName="CopyCutPasteButtons";var x=n.memo(v);export{x as default};
//# sourceMappingURL=CopyCutPasteButtons.js.map
