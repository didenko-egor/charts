import e,{useState as n,useRef as o,useMemo as t,useCallback as i,useEffect as r}from"react";import a from"lodash.debounce";import"tslib";import{MemoizedInputHint as s}from"../packages/core/shared/InputHint/index.js";import{MemoizedInputLabel as l}from"../packages/core/shared/InputLabel/index.js";import{BaseSelect as d}from"../packages/core/shared/BaseSelect/index.js";import{BaseInput as c}from"../shared/BaseInput/index.js";import{useFormContext as u}from"../shared/Form/formContext.js";import m from"../packages/core/utils/getLabelColor/index.js";import{IconSearch as f,IconChevronDown as p}from"../icons/index.js";import h from"../shared/BaseInput/coreStyles.scss.js";import v from"../shared/BaseInput/WithIcons/coreStyles.scss.js";var b={},I=function(I){var E=I.id,g=I.items,x=I.label,D=I.placeholder,y=void 0===D?"":D,j=I.disabled,C=I.isError,L=I.showHint,A=I.hintMessage,k=I.onChange,B=void 0===k?function(){}:k,M=I.labelAside,S=I.activeValue,T=I.size,w=void 0===T?"default":T,z=I.dataTestId,W=void 0===z?"select_input_id":z,F=I.onAsyncChange,H=I.labelWidth,_=I.fixedModeID,O=I.fieldName,K=I.inputOnKeyPress,P=I.itemDataTestId,V=I.hasMoreData,N=I.onLoadMoreData,R=I.debounceTime,Z=void 0===R?700:R,q=I.callAsyncChangeOnFocus,G=u({labelWidth:H,labelAside:M,size:w}),J=G.LABEL_WIDTH,Q=G.LABEL_ASIDE,U=G.SIZE,X=n(!1),Y=X[0],$=X[1],ee=n(!1),ne=ee[0],oe=ee[1],te=n(""),ie=te[0],re=te[1],ae=n(!1),se=ae[0],le=ae[1],de=o(null),ce=t((function(){var e,n;return null===(n=null===(e=null==g?void 0:g.find((function(e){return e.value===S})))||void 0===e?void 0:e.label)||void 0===n?void 0:n.trim()}),[S,g]),ue=i((function(e){B(e,O),$(!1)}),[O,B]),me=i(a((function(e){F(e)}),Z),[Z,F]),fe=i((function(e){"Enter"===e.key&&ie&&(me.cancel(),F(ie)),K&&K(e)}),[K,ie,F,me]),pe=i((function(e){$(!0),oe(!0),re(e),me(e),e||(ce&&B(void 0,O),q||(me.cancel(),$(!1)))}),[ce,q,O,B,me]),he=i((function(){le(!1)}),[]),ve=i((function(){ce&&re(ce),$(!1),he()}),[ce,he]),be=i((function(){return $(!0)}),[]),Ie=i((function(){var e;null===(e=de.current)||void 0===e||e.focus(),le(!0),q?(pe(null!=ie?ie:""),be()):g.length&&(oe(!1),be())}),[q,g.length,pe,ie,be]),Ee=i((function(){V&&N&&N()}),[V,N]);r((function(){oe(!1)}),[g]),r((function(){ce&&re(ce)}),[ce]);var ge=t((function(){return[{icon:se?e.createElement(f,null):e.createElement(p,null),onClick:Ie}]}),[se,Ie]),xe=x?e.createElement(l,{color:m(j),text:x,size:U,htmlFor:E}):null,De=L?e.createElement(s,{disabled:j,isError:C,hintMessage:A}):null;return e.createElement(d,{size:U,disabled:j,labelAside:Q,label:xe,hint:De,showHint:L,isError:C,items:g,isOpenDropdown:Y,activeValue:S,isLoading:ne,dataTestId:W,onItemClick:ue,onCloseDropdown:ve,labelWidth:J,fixedModeID:_,itemDataTestId:P,onLoadMoreData:Ee},e.createElement(c,{id:E,inputRef:de,value:ie,placeholder:y,size:U,icons:ge,styles:h,isError:C,disabled:j,wrapperStyles:b,iconsStyles:v,onChange:pe,onKeyPress:fe,onFocus:Ie,onBlur:he}))};export{I as AsyncSelect};
//# sourceMappingURL=index.js.map
