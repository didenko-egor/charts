import{__rest as e,__assign as t}from"tslib";import i,{useMemo as r,useContext as o,useCallback as a}from"react";import{cssDecorator as s}from"@front-toolkit/utils";import l from"classnames/bind";import{MemoizedInputHint as n}from"../packages/core/shared/InputHint/index.js";import{MemoizedInputLabel as d}from"../packages/core/shared/InputLabel/index.js";import{InputWrapper as m}from"../shared/InputWrapper/index.js";import"../shared/InputWrapper/coreStyles.scss.js";import"../packages/core/shared/BaseSelect/DropdownList/index.js";import{useFormContext as u}from"../shared/Form/formContext.js";import{InputWrapperContext as c}from"../shared/InputWrapper/InputWrapperContext.js";import h from"../packages/core/utils/getLabelColor/index.js";import{ScrollBox as p}from"../shared/ScrollBox/index.js";import f from"./InputWrapperExtends.scss.js";import v from"./Textarea.scss.js";import g from"./Counter.js";var b=s(v);function x(s){var x,E,I,W,j,w=s.size,L=void 0===w?"default":w,z=s.counter,H=s.disabled,C=void 0!==H&&H,S=s.isError,A=s.uncontrolled,T=s.showHint,D=void 0!==T&&T,M=s.dataTestHintId,k=s.hintMessage,B=s.pseudo,N=s.withoutDefaultMinWidth,y=s.label,F=s.labelAside,_=s.labelWidth,O=s.stretch,Z=void 0!==O&&O,q=s.maxLength,G=void 0===q?void 0:q,J=s.value,K=void 0===J?"":J,P=s.onChange,Q=s.dataTestId,R=s.rows,U=void 0===R?5:R,V=s.fieldName,X=s.id,Y=e(s,["size","counter","disabled","isError","uncontrolled","showHint","dataTestHintId","hintMessage","pseudo","withoutDefaultMinWidth","label","labelAside","labelWidth","stretch","maxLength","value","onChange","dataTestId","rows","fieldName","id"]),$=r((function(){return l.bind(v)}),[]),ee=z?U-1:U,te=null!==(W=null===(I=o(c))||void 0===I?void 0:I.size)&&void 0!==W?W:L,ie=u({labelWidth:_,labelAside:F,size:te}),re=ie.LABEL_WIDTH,oe=ie.LABEL_ASIDE,ae=ie.SIZE,se=G&&G>0?K.slice(0,G):K,le=A?void 0:se,ne=a((function(e){var t=e.target.value;P&&P(t,V)}),[V,P]),de=r((function(){return{default:{lineHeight:24,offset:z?12:24,counterSize:36},small:{lineHeight:20,offset:z?8:16,counterSize:28}}}),[z]),me=r((function(){var e=de[te];return Z?z?"calc(100% - "+e.counterSize+"px)":void 0:ee*e.lineHeight+e.offset}),[de,te,ee,z,Z]),ue=y?i.createElement(d,{color:h(C),text:y,size:ae,htmlFor:X}):null,ce=D?i.createElement(n,{disabled:C,isError:S,dataTestId:M,hintMessage:k}):null;return i.createElement(m,{label:ue,hint:ce,showHint:D,styles:f,size:ae,disabled:C,labelAside:oe,labelWidth:re,isError:S,withoutDefaultMinWidth:N,htmlFor:X},i.createElement("div",{className:f.textarea},i.createElement(p,{maxHeight:me,height:me},i.createElement("div",{className:b("input-sizer",(x={},x[""+ae]=!0,x["show-counter"]=z,x)),"data-value":le},i.createElement("textarea",t({},Y,{id:X,className:$("input",(E={},E[""+ae]=!0,E.pseudo=B,E)),onChange:ne,value:le,rows:ee,maxLength:G&&G>0?G:void 0,readOnly:B,"data-test-id":Q,disabled:C,autoComplete:"off"})))),i.createElement(g,{show:Boolean(z),disabled:C,textLength:null!==(j=null==le?void 0:le.length)&&void 0!==j?j:0,maxLength:G,size:ae})))}export{x as Textarea};
//# sourceMappingURL=index.js.map
