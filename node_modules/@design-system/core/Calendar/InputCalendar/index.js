import"focus-visible";import e,{useState as t,useRef as n,useMemo as a,useEffect as o,useCallback as r}from"react";import{format as i,parse as l}from"date-fns";import s from"../../packages/core/hooks/useDropdownElementBehavior.js";import{MaskedInput as d}from"../../MaskedInput/index.js";import{IconCalendar as u}from"../../icons/index.js";import{BaseCalendar as c}from"../../shared/BaseCalendar/index.js";import p from"./styles.scss.js";var h=/^(?:(?:31(\/|-|\.)(?:0?[13578]|1[02]))\1|(?:(?:29|30)(\/|-|\.)(?:0?[1,3-9]|1[0-2])\2))(?:(?:1[6-9]|[2-9]\d)?\d{2})$|^(?:29(\/|-|\.)0?2\3(?:(?:(?:1[6-9]|[2-9]\d)?(?:0[48]|[2468][048]|[13579][26])|(?:(?:16|[2468][048]|[3579][26])00))))$|^(?:0?[1-9]|1\d|2[0-8])(\/|-|\.)(?:(?:0?[1-9])|(?:1[0-2]))\4(?:(?:1[6-9]|[2-9]\d)?\d{2})$|^\s*$/,m=function(e){if(e&&e.split(".").length>=3){var t=e.split("."),n=t[0],a=t[1],o=t[2];return["d".repeat(n.length),"L".repeat(a.length),"y".repeat(o.length)].join(".")}return"dd.LL.yyyy"},f=function(f){var g=f.size,v=f.hintMessage,w=f.label,b=f.labelWidth,y=f.id,D=f.name,k=f.pseudo,x=f.disabled,E=f.showHint,C=f.labelAside,I=f.placeholder,j=f.inputRef,H=f.dataTestId,M=f.dataTestHintId,B=f.onClick,T=f.onSelectedDateChange,W=f.onKeyPress,$=f.uncontrolled,L=f.onFocus,P=f.onBlur,S=f.height,z=f.maxDate,A=f.minDate,F=f.locale,K=f.rowHeight,N=f.tabIndex,R=f.value,V=f.weekdays,q=f.isError,G=f.withoutDefaultMinWidth,J=f.defaultValue,O=t(""),Q=O[0],U=O[1],X=t(R),Y=X[0],Z=X[1],_=t(!1),ee=_[0],te=_[1],ne=n(null),ae=n(null),oe=s(ne,ae).dropdownStyle,re=R||J,ie=a((function(){return[{icon:e.createElement(u,null),disabled:!1}]}),[]);o((function(){re&&(U((function(e){return i(re,m(e))})),Z(re))}),[re]);var le=r((function(e){return e.stopPropagation()}),[]),se=r((function(e){e[0]&&U(i(e[0],m(Q))),T&&T(e)}),[Q,T]);o((function(){te(!h.test(Q))}),[Q]);var de=r((function(e){if(U(e),e&&h.test(e)){var t=l(e,m(e),new Date);Z(t)}}),[]);return e.createElement("div",{className:p.wrapper,ref:ne},e.createElement(d,{placeholderMask:"дд.мм.гггг",name:D,value:R?Q:"",onChange:de,placeholder:I,isError:q||ee,icons:ie,size:g,hintMessage:v,label:w,labelWidth:b,id:y,pseudo:k,disabled:x,showHint:E,labelAside:C,inputRef:j,dataTestId:H,dataTestHintId:M,onClick:B,onKeyPress:W,uncontrolled:$,onFocus:L,onBlur:P,withoutDefaultMinWidth:G}),e.createElement("div",{className:p.dropdown,onClick:le,style:oe,ref:ae,role:"presentation"},e.createElement(c,{height:S,locale:F,maxDate:z,minDate:A,onSelectedDateChange:se,rowHeight:K,tabIndex:N,weekdays:V,value:Y,defaultValue:J})))};export{f as InputCalendar};
//# sourceMappingURL=index.js.map
