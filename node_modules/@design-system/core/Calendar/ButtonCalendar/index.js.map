{"version":3,"file":"index.js","sources":["../../../src/Calendar/ButtonCalendar/index.tsx"],"sourcesContent":["import 'focus-visible';\nimport React, {\n  useRef,\n  useState,\n  useEffect\n} from 'react';\nimport cn from 'classnames';\nimport { CalendarProps } from 'shared/types/calendar';\nimport { useDropdownElementBehavior } from 'core/hooks';\nimport { Button, ButtonProps } from 'core/src/Button';\nimport { BaseCalendar } from 'shared/BaseCalendar';\n\nimport colorStyles from 'shared/BaseCalendar/coreColorStyles.scss';\n\nimport styles from './styles.scss';\n\n/**\n * @deprecated Компонент более не поддерживается и будет удален.\n * */\nexport const ButtonCalendar: React.FC<ButtonProps & CalendarProps> = props => {\n  const {\n    text,\n    type,\n    size,\n    stretch,\n    href,\n    target,\n    rel,\n    role,\n    ariaLabel,\n    dataTestId,\n    disabled,\n    iconLeft,\n    iconRight,\n    height,\n    maxDate,\n    minDate,\n    locale,\n    onSelectedDateChange,\n    rowHeight,\n    tabIndex,\n    value,\n    weekdays,\n    defaultValue\n  } = props;\n\n  const [isOpen, setOpen] = useState<boolean>(false);\n\n  const targetRef = useRef<HTMLInputElement>(null);\n  const childRef = useRef<HTMLDivElement>(null);\n\n  const stopPropagation = (event: React.MouseEvent<HTMLDivElement>): void => event.stopPropagation();\n\n  const onToggleDropdown = (): void => {\n    setOpen(!isOpen);\n  };\n\n  const onCloseDropdown = (): void => {\n    setOpen(false);\n  };\n\n  useEffect((): VoidFunction | undefined => {\n    if (isOpen) {\n      document.addEventListener('click', onCloseDropdown);\n\n      return (): void => {\n        document.removeEventListener('click', onCloseDropdown);\n      };\n    }\n\n    return undefined;\n  }, [isOpen]);\n\n  const { dropdownStyle } = useDropdownElementBehavior(\n    targetRef,\n    childRef,\n    true\n  );\n\n  return (\n    <div className={ styles.wrapper } ref={ targetRef }>\n      <Button\n        text={ text }\n        type={ type }\n        size={ size }\n        stretch={ stretch }\n        href={ href }\n        target={ target }\n        rel={ rel }\n        role={ role }\n        ariaLabel={ ariaLabel }\n        dataTestId={ dataTestId }\n        disabled={ disabled }\n        iconLeft={ iconLeft }\n        iconRight={ iconRight }\n        onClick={ onToggleDropdown }\n      />\n      <div\n        className={ cn(styles.dropdown, { [styles['dropdown--isOpen']]: isOpen }) }\n        style={ dropdownStyle }\n        onClick={ stopPropagation }\n        ref={ childRef }\n        role=\"presentation\"\n      >\n        <BaseCalendar\n          height={ height }\n          maxDate={ maxDate }\n          minDate={ minDate }\n          locale={ locale }\n          onSelectedDateChange={ onSelectedDateChange }\n          range\n          rowHeight={ rowHeight }\n          tabIndex={ tabIndex }\n          value={ value }\n          weekdays={ weekdays }\n          colorStyles={ colorStyles }\n          defaultValue={ defaultValue }\n        />\n      </div>\n    </div>\n  );\n};\n"],"names":["ButtonCalendar","props","text","type","size","stretch","href","target","rel","role","ariaLabel","dataTestId","disabled","iconLeft","iconRight","height","maxDate","minDate","locale","onSelectedDateChange","rowHeight","tabIndex","value","weekdays","defaultValue","_b","useState","isOpen","setOpen","targetRef","useRef","childRef","onCloseDropdown","useEffect","document","addEventListener","removeEventListener","dropdownStyle","useDropdownElementBehavior","React","className","styles","wrapper","ref","Button","onClick","cn","dropdown","_a","style","event","stopPropagation","BaseCalendar","range","colorStyles"],"mappings":"4YAmBaA,EAAwD,SAAAC,SAEjEC,EAuBED,OAtBFE,EAsBEF,OArBFG,EAqBEH,OApBFI,EAoBEJ,UAnBFK,EAmBEL,OAlBFM,EAkBEN,SAjBFO,EAiBEP,MAhBFQ,EAgBER,OAfFS,EAeET,YAdFU,EAcEV,aAbFW,EAaEX,WAZFY,EAYEZ,WAXFa,EAWEb,YAVFc,EAUEd,SATFe,EASEf,UARFgB,EAQEhB,UAPFiB,EAOEjB,SANFkB,EAMElB,uBALFmB,EAKEnB,YAJFoB,EAIEpB,WAHFqB,EAGErB,QAFFsB,EAEEtB,WADFuB,EACEvB,eAEEwB,EAAoBC,GAAkB,GAArCC,OAAQC,OAETC,EAAYC,EAAyB,MACrCC,EAAWD,EAAuB,MAQlCE,EAAkB,WACtBJ,GAAQ,IAGVK,GAAU,WACR,GAAIN,EAGF,OAFAO,SAASC,iBAAiB,QAASH,GAE5B,WACLE,SAASE,oBAAoB,QAASJ,MAKzC,CAACL,IAEI,IAAAU,EAAkBC,EACxBT,EACAE,GACA,iBAGF,OACEQ,uBAAKC,UAAYC,EAAOC,QAAUC,IAAMd,GACtCU,gBAACK,GACC1C,KAAOA,EACPC,KAAOA,EACPC,KAAOA,EACPC,QAAUA,EACVC,KAAOA,EACPC,OAASA,EACTC,IAAMA,EACNC,KAAOA,EACPC,UAAYA,EACZC,WAAaA,EACbC,SAAWA,EACXC,SAAWA,EACXC,UAAYA,EACZ+B,QA1CmB,WACvBjB,GAASD,MA2CPY,uBACEC,UAAYM,EAAGL,EAAOM,eAAYC,EAACP,EAAO,qBAAsBd,MAChEsB,MAAQZ,EACRQ,QAjDkB,SAACK,GAAkD,OAAAA,EAAMC,mBAkD3ER,IAAMZ,EACNtB,KAAK,gBAEL8B,gBAACa,GACCrC,OAASA,EACTC,QAAUA,EACVC,QAAUA,EACVC,OAASA,EACTC,qBAAuBA,EACvBkC,SACAjC,UAAYA,EACZC,SAAWA,EACXC,MAAQA,EACRC,SAAWA,EACX+B,YAAcA,EACd9B,aAAeA,KAKzB"}