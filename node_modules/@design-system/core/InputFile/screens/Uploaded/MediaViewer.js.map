{"version":3,"file":"MediaViewer.js","sources":["../../../../src/InputFile/screens/Uploaded/MediaViewer.tsx"],"sourcesContent":["import React, {\n  memo,\n  useEffect,\n  useRef\n} from 'react';\n\nimport { MediaType } from '../../mimeTypes';\n\ninterface MediaViewerProps {\n  /** URL медиа */\n  fileUrl: string;\n\n  /** Тиа медиа */\n  mediaType: MediaType;\n\n  /** Сейчас воспроизводится? */\n  isPlaying: boolean;\n\n  /** Имя файла */\n  fileName?: string;\n}\n\n/** Общий интерфейс для audio и video */\ninterface MediaPlayer {\n  play: () => Promise<void>;\n  pause: VoidFunction;\n}\n\nfunction MediaViewer({\n  fileUrl,\n  mediaType,\n  isPlaying,\n  fileName = ''\n}: MediaViewerProps): JSX.Element {\n  const playerRef = useRef(null);\n\n  /** Управление воспроизведением */\n  useEffect((): VoidFunction => {\n    const player = playerRef.current && mediaType !== MediaType.Image\n      ? playerRef.current as MediaPlayer\n      : null;\n\n    player?.[isPlaying ? 'play' : 'pause']();\n\n    return () => player?.pause();\n  }, [isPlaying, mediaType, fileUrl]);\n\n  switch (mediaType) {\n    case MediaType.Video:\n      return (\n        <video\n          ref={ playerRef }\n          src={ fileUrl }\n        >\n          <track kind=\"captions\" />\n        </video>\n      );\n\n    case MediaType.Audio:\n      return (\n        <audio\n          ref={ playerRef }\n          src={ fileUrl }\n        >\n          <track kind=\"captions\" />\n        </audio>\n      );\n\n    case MediaType.Image:\n      return (\n        <img\n          src={ fileUrl }\n          alt={ fileName }\n          aria-label=\"Загружаемое изображение\"\n        />\n      );\n\n    default:\n      return (\n        <span />\n      );\n  }\n}\n\nconst MemoMediaViewer = memo(MediaViewer);\nMemoMediaViewer.displayName = 'MediaViewer';\n\nexport default MemoMediaViewer;\n"],"names":["MemoMediaViewer","memo","_a","fileUrl","mediaType","isPlaying","_b","fileName","playerRef","useRef","useEffect","player","current","MediaType","Image","pause","Video","React","ref","src","kind","Audio","alt","displayName"],"mappings":"8GAoFMA,EAAkBC,GAxDxB,SAAqBC,OACnBC,YACAC,cACAC,cACAC,aAAAC,aAAW,KAELC,EAAYC,EAAO,MAazB,OAVAC,GAAU,WACR,IAAMC,EAASH,EAAUI,SAAWR,IAAcS,EAAUC,MACxDN,EAAUI,QACV,KAIJ,OAFAD,SAAAA,EAASN,EAAY,OAAS,WAEvB,WAAM,OAAAM,eAAAA,EAAQI,WACpB,CAACV,EAAWD,EAAWD,IAElBC,GACN,KAAKS,EAAUG,MACb,OACEC,yBACEC,IAAMV,EACNW,IAAMhB,GAENc,yBAAOG,KAAK,cAIlB,KAAKP,EAAUQ,MACb,OACEJ,yBACEC,IAAMV,EACNW,IAAMhB,GAENc,yBAAOG,KAAK,cAIlB,KAAKP,EAAUC,MACb,OACEG,uBACEE,IAAMhB,EACNmB,IAAMf,eACK,4BAIjB,QACE,OACEU,6BAGR,IAGAjB,EAAgBuB,YAAc"}