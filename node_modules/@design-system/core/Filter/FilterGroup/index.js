import{__spreadArray as e,__assign as t}from"tslib";import n,{useState as r,useEffect as i,useCallback as o,useMemo as a}from"react";import c from"../FilterCheckbox/index.js";import l from"../DateRange/index.js";import u from"../FilterDummy/index.js";import m from"../FilterRadio/index.js";import d from"../FilterWrapper/index.js";import{isListIncludesItem as s,getFilterId as f,getCurrentActiveItems as p}from"../utils.js";import{GroupItemContext as g}from"./GroupItemContext.js";var x={checkbox:c,radio:m,"date-range":l},h=function(c){var l=c.title,m=c.configs,h=c.activeItems,C=c.isHiddenHeader,v=c.zIndex,F=c.onChange,k=c.onChangeByFilter,E=r(!1),I=E[0],j=E[1],H=r(null),b=H[0],y=H[1];i((function(){I||y(null)}),[I]);var B=o((function(){F&&F([]),j(!1)}),[F]),z=o((function(t,n,r){var i=h.filter((function(e){return!s(e,n)}));F(t.length?e(e([],i,!0),t,!0):i),k&&k(t,r)}),[h,F,k]),O=a((function(){return m.map((function(e){var r=f(e.items),i=r?p(h,e.items):[],o={isCurrentFilter:b===r,onForwardButtonClick:function(){return y(r)},onBackBtnClick:function(){return y(null)},activeCurrentItems:i},a={activeItems:i,isHiddenHeader:!1,isOpen:b===r,zIndex:v,onChange:function(t){return z(t,e.items,r)}};return n.createElement(n.Fragment,{key:r},n.createElement(g.Provider,{value:o},function(e,r){switch(e.type){case"checkbox":return n.createElement(x.checkbox,t({config:e},r));case"radio":return n.createElement(x.radio,t({config:e},r));case"date-range":return n.createElement(x["date-range"],t({config:e},r));default:return null}}(e,a)))}))}),[h,m,z,b,v]);return n.createElement(d,{title:l,isOpen:I,activeCount:h.length,onOpenStatusChange:j,isHiddenHeader:C||!!b,onClearAll:B,zIndex:v,groupWrapperParams:{currentFilterId:b}},n.createElement(n.Fragment,null,O.length?O:n.createElement(u,null,"Загрузка...")))};export{h as default};
//# sourceMappingURL=index.js.map
