import{useState as t,useRef as e,useEffect as n}from"react";import r from"./useControlledOpenStatus.js";function o(o){var i=o.zIndex,d=o.activeCount,u=o.groupItemParams,l=o.isOpen,s=o.loadMoreTriggerElement,c=o.groupWrapperParams,p=o.onOpenStatusChange,a=o.onScrolledToEnd,m=t(),f=m[0],v=m[1],b=r({isOpen:l,onOpenStatusChange:p,groupItemParams:u}),y=b.isCurrentOpen,g=b.handleStatusOpenChange,w=e(null),h=e(null);return n((function(){var t,e,n,r,o;!u&&y&&(document.body.style.setProperty("--ds-temp-filter-dropdown-top",+window.scrollY+ +(null!==(t=null==f?void 0:f.bottom)&&void 0!==t?t:0)+"px"),document.body.style.setProperty("--ds-temp-filter-btn-bottom",(null!==(e=null==f?void 0:f.bottom)&&void 0!==e?e:0)+"px"),document.body.style.setProperty("--ds-temp-filter-dropdown-z-index",""+i),document.body.style.setProperty("--ds-temp-filter-dropdown-right",document.body.clientWidth-+(null!==(n=null==f?void 0:f.right)&&void 0!==n?n:0)+"px")),(null==c?void 0:c.currentFilterId)?null===(r=h.current)||void 0===r||r.setAttribute("style","display: none;"):null===(o=h.current)||void 0===o||o.setAttribute("style","opacity: 1;")}),[u,c,y,f,i]),n((function(){if(!u)return function(){["--ds-temp-filter-dropdown-top","--ds-temp-filter-btn-bottom","--ds-temp-filter-dropdown-z-index","--ds-temp-filter-dropdown-right"].forEach((function(t){return document.body.style.setProperty(t,null)}))}}),[u]),n((function(){if(!(!h.current||!(u||w.current))){var t=function(t){return"function"==typeof t.target.closest&&t.target.closest("button")===w.current?void 0:g(!1)},e=function(){if(!u&&y){var t=w.current?w.current.getBoundingClientRect():{bottom:"",right:""},e=t.bottom,n=t.right;v({bottom:e,right:n})}};return e(),document.addEventListener("click",t),window.addEventListener("resize",e),window.addEventListener("scroll",e),function(){document.removeEventListener("click",t),window.removeEventListener("resize",e),window.removeEventListener("scroll",e)}}}),[y,g,d,i,u]),n((function(){var t=h.current;if(s&&t){var e=new IntersectionObserver((function(t){t[0].isIntersecting&&a&&a()}),{root:t});return e.observe(s),function(){return e.disconnect()}}}),[s,a]),{buttonRef:w,dropDownRef:h,isCurrentOpen:y,handleStatusOpenChange:g}}export{o as default};
//# sourceMappingURL=useFilterWrapper.js.map
