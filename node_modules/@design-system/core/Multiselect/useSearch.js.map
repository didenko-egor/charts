{"version":3,"file":"useSearch.js","sources":["../../src/Multiselect/useSearch.tsx"],"sourcesContent":["import {\n  RefObject,\n  useCallback,\n  useRef,\n  useState\n} from 'react';\nimport { BaseSelectItem } from 'core/types/select';\n\ninterface UseSearchResult {\n  /** Реф элемента поиска */\n  searchRef: RefObject<HTMLInputElement>;\n\n  /** Найденные элементы. Если поиск не задан - все элементы */\n  foundItems: BaseSelectItem[];\n\n  /** Обработчик изменения значения в строке поиска */\n  handleSearch: (value: string) => void;\n\n  /** Очистить строку поиска */\n  clearSearch: VoidFunction;\n\n  /** Очистить строку поиска и перевести фокус на неё */\n  clearAndFocusSearch: VoidFunction;\n}\n\n/**\n * Логика работы с поиском\n * @param items Из чего искать\n */\nexport default function useSearch(items: BaseSelectItem[]): UseSearchResult {\n  const [foundItems, setFoundItems] = useState<BaseSelectItem[]>([]);\n  const searchRef = useRef<HTMLInputElement>(null);\n\n  const handleSearch = useCallback((search: string) => {\n    const searchLowerCase = search.toLowerCase();\n\n    const newFoundItems = search.length > 0\n      ? items.filter(item => item.label.toLowerCase().includes(searchLowerCase))\n      : items;\n\n    setFoundItems(newFoundItems);\n  }, [items]);\n\n  const clearSearch = useCallback(() => {\n    setFoundItems(items);\n  }, [items]);\n\n  const clearAndFocusSearch = useCallback(() => {\n    if (!searchRef.current) return;\n\n    searchRef.current.value = '';\n    searchRef.current.focus();\n    clearSearch();\n  }, [clearSearch]);\n\n  return {\n    searchRef,\n    foundItems,\n    handleSearch,\n    clearSearch,\n    clearAndFocusSearch\n  };\n}\n"],"names":["useSearch","items","_a","useState","foundItems","setFoundItems","searchRef","useRef","handleSearch","useCallback","search","searchLowerCase","toLowerCase","newFoundItems","length","filter","item","label","includes","clearSearch","clearAndFocusSearch","current","value","focus"],"mappings":"uEA6BwBA,EAAUC,GAC1B,IAAAC,EAA8BC,EAA2B,IAAxDC,OAAYC,OACbC,EAAYC,EAAyB,MAErCC,EAAeC,GAAY,SAACC,GAChC,IAAMC,EAAkBD,EAAOE,cAEzBC,EAAgBH,EAAOI,OAAS,EAClCb,EAAMc,QAAO,SAAAC,GAAQ,OAAAA,EAAKC,MAAML,cAAcM,SAASP,MACvDV,EAEJI,EAAcQ,KACb,CAACZ,IAEEkB,EAAcV,GAAY,WAC9BJ,EAAcJ,KACb,CAACA,IAEEmB,EAAsBX,GAAY,WACjCH,EAAUe,UAEff,EAAUe,QAAQC,MAAQ,GAC1BhB,EAAUe,QAAQE,QAClBJ,OACC,CAACA,IAEJ,MAAO,CACLb,YACAF,aACAI,eACAW,cACAC,sBAEJ"}