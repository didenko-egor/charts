import"focus-visible";import e,{useState as t,useCallback as a,useMemo as n,useEffect as o}from"react";import{cssDecorator as r}from"@front-toolkit/utils";import"tslib";import"../packages/core/shared/InputHint/index.js";import{MemoizedInputLabel as i}from"../packages/core/shared/InputLabel/index.js";import{BaseSelect as s}from"../packages/core/shared/BaseSelect/index.js";import{BaseInput as l}from"../shared/BaseInput/index.js";import{useFormContext as c}from"../shared/Form/formContext.js";import m from"../packages/core/utils/getLabelColor/index.js";import{IconChevronDown as d,IconSearch as u}from"../icons/index.js";import p from"../shared/BaseInput/WithIcons/coreStyles.scss.js";import f from"./Label/index.js";import h from"./useSearch.js";import v from"./useMultiselect.js";import I from"./useStyles.js";import b from"./inputStyles.scss.js";var E=r(b),g={},S="default",j="multiselect_id",k=!0,x={searchIcon:"multiSelect_searchIcon",chevronDownIcon:"multiSelect_chevronDownIcon"};function C(r){var C,D=r.id,A=r.items,L=r.activeValue,T=r.labelAside,w=r.disabled,N=r.label,_=r.enableSearch,y=void 0===_?k:_,z=r.size,B=void 0===z?S:z,V=r.onChange,F=void 0===V?function(){}:V,W=r.dataTestId,O=void 0===W?j:W,H=r.labelWidth,M=r.fieldName,R=c({labelWidth:H,labelAside:T,size:B}),U=R.LABEL_WIDTH,K=R.LABEL_ASIDE,P=R.SIZE,Z=t(!1),q=Z[0],G=Z[1],J=I(q),Q=h(A),X=Q.foundItems,Y=Q.handleSearch,$=Q.clearSearch,ee=Q.searchRef,te=Q.clearAndFocusSearch,ae=a((function(e){var t;y?te():null===(t=J.current)||void 0===t||t.focus(),F(e,M)}),[J,te,y,M,F]),ne=v({items:A,activeValue:L,onChangeActiveValue:ae,markSize:B}),oe=ne.activeLabels,re=ne.toggleActiveValue,ie=ne.getMarks,se=ne.handleDeleteLastItem,le=a((function(e){var t=e.target;"INPUT"!==t.tagName&&(t.className.includes("mark")||"BUTTON"!==t.tagName&&(G((function(e){return!e})),$()))}),[$]),ce=a((function(){G(!1),$()}),[$]),me=n((function(){return[{icon:y&&q?e.createElement("span",null):e.createElement(d,{dataTestId:x.chevronDownIcon}),onClick:function(){G((function(e){return!e})),$()}}]}),[q,y,$]),de=N?e.createElement("div",{onClick:le},e.createElement(i,{size:P,htmlFor:D,text:N,color:m(w)})):null;return o((function(){y&&q&&te()}),[q,y,te]),e.createElement(s,{items:X,activeValue:L,size:P,labelAside:K,isOpenDropdown:q,disabled:w,label:de,onItemClick:re,onCloseDropdown:ce,dataTestId:O,labelWidth:U},e.createElement(l,{id:D,inputElement:"div",autoFocus:!0,inputRef:J,icons:me,iconsStyles:p,size:P,disabled:w,styles:b,wrapperStyles:g,onClick:le,onKeyDown:se,dataTestId:O+"_input"},e.createElement(f,{placeholder:y?void 0:"â€”",isOpenDropdown:q,activeValue:L,text:oe,disabled:w}),q&&e.createElement(e.Fragment,null,ie(),y&&e.createElement("div",{className:b.search_input},e.createElement("input",{ref:ee,onChange:function(e){return Y(e.target.value)}}),e.createElement("span",{className:E("search_icon",(C={},C[""+B]=!0,C))},e.createElement(u,{dataTestId:x.searchIcon}))))))}export{x as DATA_TEST_ID,C as Multiselect};
//# sourceMappingURL=index.js.map
