import{__assign as e}from"tslib";import t,{useContext as i,useMemo as r,useCallback as a}from"react";import{setHours as o,setMinutes as n}from"date-fns";import{cssDecorator as d}from"@front-toolkit/utils";import{InputCalendar as l}from"../Calendar/InputCalendar/index.js";import{getTimePrefix as s}from"../packages/core/utils/getTimePrefix.js";import{InputTime as m}from"../InputTime/index.js";import{InputWrapper as u}from"../shared/InputWrapper/index.js";import{useFormContext as p}from"../shared/Form/formContext.js";import{InputWrapperContext as f}from"../shared/InputWrapper/InputWrapperContext.js";import h from"./styles.scss.js";var v=d(h),c=function(d){var c,b,E,I=d.size,W=void 0===I?"default":I,g=d.disabled,D=void 0!==g&&g,w=d.isError,C=void 0!==w&&w,j=d.labelAside,x=void 0!==j&&j,A=d.label,T=void 0===A?"":A,M=d.hintMessage,z=void 0===M?"":M,H=d.inputCalendar,L=d.inputTime,_=d.onChange,S=d.value,k=d.showHint,y=void 0!==k&&k,B=d.dataTestId,F=d.withoutDefaultMinWidth,N=d.id,P=d.labelWidth,Z=null!==(E=null===(b=i(f))||void 0===b?void 0:b.size)&&void 0!==E?E:W,q=p({labelWidth:P,labelAside:x,size:Z}),G=q.LABEL_WIDTH,J=q.LABEL_ASIDE,K=q.SIZE,O=r((function(){if(S){var e=new Date(S),t=+e.getHours(),i=+e.getMinutes();return{date:e,time:s(t)+":"+s(i)}}return{date:void 0,time:""}}),[S]),Q=O.date,R=O.time,U=a((function(e){var t=e[0];t&&t!==Q&&_(t)}),[_,Q]),V=a((function(e){var t=e&&e.split(":").length>=2?e.split(":"):["00","00"],i=t[0],r=t[1],a=Q?new Date(Q):new Date,d=o(n(a,+r),+i);_(d)}),[_,Q]);return t.createElement(u,{label:T,hint:z,styles:h,showHint:y,size:K,disabled:D,labelAside:J,labelWidth:G,isError:C,withoutDefaultMinWidth:F,htmlFor:N,dataTestId:B},t.createElement("div",{className:v("input_date_time",(c={},c[""+K]=!0,c))},t.createElement(l,e({},H,{id:N,value:Q,onSelectedDateChange:U,disabled:D,isError:C,withoutDefaultMinWidth:!0})),t.createElement(m,e({},L,{value:R,onChange:V,disabled:D,isError:C}))))};export{c as InputDateTime};
//# sourceMappingURL=index.js.map
