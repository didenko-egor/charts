{"version":3,"file":"useBodyScrollLock.js","sources":["../../../src/CalendarV2/hooks/useBodyScrollLock.tsx"],"sourcesContent":["import {\n  useEffect,\n  useState,\n  useCallback,\n  RefObject\n} from 'react';\nimport { disableBodyScroll, clearAllBodyScrollLocks } from 'body-scroll-lock';\n\ninterface UseBodyScrollLockProps {\n  /** Ссылка на родительский элемент */\n  targetRef: RefObject<HTMLElement>;\n}\n\n/** Логика блокировка скролла родителя при открытии календаря */\nexport function useBodyScrollLock({ targetRef }: UseBodyScrollLockProps): void {\n  // Флаг-состояние, обозначающее что родительский элемент/ты уже заблокировал/ли прокрутку\n  const [isBodyLocked, setBodyLocked] = useState(false);\n\n  const handleFocus = useCallback(event => {\n    if (document.body.style.getPropertyValue('overflow') === 'hidden') {\n      setBodyLocked(true);\n    } else {\n      disableBodyScroll(event.currentTarget);\n    }\n  }, []);\n\n  const handleBlur = useCallback(() => {\n    if (!isBodyLocked) {\n      clearAllBodyScrollLocks();\n    }\n  }, [isBodyLocked]);\n\n  useEffect(() => {\n    const targetElement = targetRef?.current;\n\n    if (targetElement) {\n      targetElement.addEventListener('focusin', handleFocus);\n      targetElement.addEventListener('focusout', handleBlur);\n      targetElement.addEventListener('onblur', handleBlur);\n\n      return (): void => {\n        targetElement.removeEventListener('focusin', handleFocus);\n        targetElement.removeEventListener('focusout', handleBlur);\n        targetElement.removeEventListener('onblur', handleBlur);\n      };\n    }\n\n    return undefined;\n  }, [handleBlur, handleFocus, targetRef]);\n}\n"],"names":["useBodyScrollLock","_a","targetRef","_b","useState","isBodyLocked","setBodyLocked","handleFocus","useCallback","event","document","body","style","getPropertyValue","disableBodyScroll","currentTarget","handleBlur","clearAllBodyScrollLocks","useEffect","targetElement","current","addEventListener","removeEventListener"],"mappings":"4JAcgBA,EAAkBC,OAAEC,cAE5BC,EAAgCC,GAAS,GAAxCC,OAAcC,OAEfC,EAAcC,GAAY,SAAAC,GAC2B,WAArDC,SAASC,KAAKC,MAAMC,iBAAiB,YACvCP,GAAc,GAEdQ,EAAkBL,EAAMM,iBAEzB,IAEGC,EAAaR,GAAY,WACxBH,GACHY,MAED,CAACZ,IAEJa,GAAU,WACR,IAAMC,EAAgBjB,eAAAA,EAAWkB,QAEjC,GAAID,EAKF,OAJAA,EAAcE,iBAAiB,UAAWd,GAC1CY,EAAcE,iBAAiB,WAAYL,GAC3CG,EAAcE,iBAAiB,SAAUL,GAElC,WACLG,EAAcG,oBAAoB,UAAWf,GAC7CY,EAAcG,oBAAoB,WAAYN,GAC9CG,EAAcG,oBAAoB,SAAUN,MAK/C,CAACA,EAAYT,EAAaL,GAC/B"}