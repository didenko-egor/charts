{"version":3,"file":"useInputTime.js","sources":["../../../src/CalendarV2/InputTime/useInputTime.tsx"],"sourcesContent":["import { useCallback, useEffect, useState } from 'react';\n\nimport { TimeValue, formatToTime, zeroPad } from './utils';\n\ninterface UseInputTimeProps {\n  /** Значение для компонента */\n  value?: TimeValue;\n\n  /** Значение внутри компонента изменилось */\n  onChange?: (value?: TimeValue) => void;\n}\n\nfunction formatToString(value?: TimeValue): string {\n  if (!value) return '';\n\n  return `${ zeroPad(value.hours) }:${ zeroPad(value.minutes) }`;\n}\n\n/** Логика уведомления об изменении значения в правильном формате */\nexport function useInputTime({\n  value,\n  onChange\n}: UseInputTimeProps): [string, (value: string) => void] {\n  const [internalValue, setInternalValue] = useState(formatToString(value));\n  const [isValid, setIsValid] = useState(true);\n\n  const handleSetValue = useCallback((newValue: string) => {\n    setInternalValue(prev => {\n      if (newValue === prev) {\n        return prev;\n      }\n\n      if (onChange) {\n        const res = formatToTime(newValue);\n\n        if (res.value) {\n          onChange(res.value);\n          setIsValid(true);\n        } else if ((res.isEmpty || !res.value) && isValid) {\n          setIsValid(false);\n          onChange();\n        }\n      }\n\n      return newValue;\n    });\n  }, [isValid, onChange]);\n\n  useEffect(() => {\n    setInternalValue(formatToString(value));\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [value?.hours, value?.minutes]);\n\n  return [internalValue, handleSetValue];\n}\n"],"names":["formatToString","value","zeroPad","hours","minutes","useInputTime","_a","onChange","_b","useState","internalValue","setInternalValue","_c","isValid","setIsValid","handleSetValue","useCallback","newValue","prev","res","formatToTime","isEmpty","useEffect"],"mappings":"wHAYA,SAASA,EAAeC,GACtB,OAAKA,EAEMC,EAAQD,EAAME,WAAYD,EAAQD,EAAMG,SAFhC,EAGrB,UAGgBC,EAAaC,OAC3BL,UACAM,aAEMC,EAAoCC,EAAST,EAAeC,IAA3DS,OAAeC,OAChBC,EAAwBH,GAAS,GAAhCI,OAASC,OAEVC,EAAiBC,GAAY,SAACC,GAClCN,GAAiB,SAAAO,GACf,GAAID,IAAaC,EACf,OAAOA,EAGT,GAAIX,EAAU,CACZ,IAAMY,EAAMC,EAAaH,GAErBE,EAAIlB,OACNM,EAASY,EAAIlB,OACba,GAAW,KACDK,EAAIE,SAAYF,EAAIlB,QAAUY,IACxCC,GAAW,GACXP,KAIJ,OAAOU,OAER,CAACJ,EAASN,IAOb,OALAe,GAAU,WACRX,EAAiBX,EAAeC,MAE/B,CAACA,eAAAA,EAAOE,MAAOF,eAAAA,EAAOG,UAElB,CAACM,EAAeK,EACzB"}