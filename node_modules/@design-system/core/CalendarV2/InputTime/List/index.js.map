{"version":3,"file":"index.js","sources":["../../../../src/CalendarV2/InputTime/List/index.tsx"],"sourcesContent":["import React, {\n  KeyboardEvent,\n  MouseEvent,\n  RefObject,\n  useCallback,\n  useEffect\n} from 'react';\nimport { cssDecorator } from '@front-toolkit/utils';\n\nimport { scrollToTop } from '../utils';\n\nimport styles from './styles.scss';\n\nconst cd = cssDecorator(styles);\n\ntype CarryChange = (val: string) => (e: KeyboardEvent<HTMLElement> | MouseEvent<HTMLElement>) => void;\n\nexport interface ListProps {\n  /** Набор возможных значений */\n  items: string[];\n\n  /** Активное значение */\n  value?: string;\n\n  /** Реф для списка */\n  listRef?: RefObject<HTMLUListElement>;\n\n  /** Обработчик выбора значения */\n  onChange: (value: string) => void;\n}\n\nexport function List({\n  items,\n  value,\n  onChange,\n  listRef\n}: ListProps): JSX.Element {\n  /** При первом открытии дропдауна или выборе значения скроллим к выбранному значению */\n  useEffect(() => {\n    const activeElement = listRef?.current?.querySelector(`.${ styles['option--active'] }`);\n\n    if (activeElement && listRef) {\n      scrollToTop(listRef, activeElement as HTMLElement);\n    }\n  }, [listRef, value]);\n\n  const onCarryChange = useCallback<CarryChange>(item => (event): void => {\n    const isPressEnter = (event as KeyboardEvent).code === 'Enter';\n    const isClick = !(event as KeyboardEvent).code;\n\n    if (isPressEnter || isClick) {\n      onChange(item);\n    }\n  }, [onChange]);\n\n  return (\n    <ul\n      className={ styles.list }\n      ref={ listRef }\n    >\n      { items.map(item => (\n        <li\n          key={ item }\n          onClick={ onCarryChange(item) }\n          onKeyPress={ onCarryChange(item) }\n          role=\"presentation\"\n          className={ cd('option', { active: value === item }) }\n          /* eslint-disable-next-line jsx-a11y/no-noninteractive-tabindex, jsx-a11y/tabindex-no-positive */\n          tabIndex={ 1 }\n        >\n          { item }\n        </li>\n      )) }\n\n      <div className={ styles.filler } />\n    </ul>\n  );\n}\n"],"names":["cd","cssDecorator","styles","List","_a","items","value","onChange","listRef","useEffect","activeElement","current","querySelector","scrollToTop","onCarryChange","useCallback","item","event","isPressEnter","code","isClick","React","className","list","ref","map","key","onClick","onKeyPress","role","active","tabIndex","filler"],"mappings":"oLAaA,IAAMA,EAAKC,EAAaC,YAkBRC,EAAKC,OACnBC,UACAC,UACAC,aACAC,YAGAC,GAAU,iBACFC,YAAgBF,eAAAA,EAASG,8BAASC,cAAc,IAAKV,EAAO,mBAE9DQ,GAAiBF,GACnBK,EAAYL,EAASE,KAEtB,CAACF,EAASF,IAEb,IAAMQ,EAAgBC,GAAyB,SAAAC,GAAQ,OAAA,SAACC,GACtD,IAAMC,EAAiD,UAAjCD,EAAwBE,KACxCC,GAAYH,EAAwBE,MAEtCD,GAAgBE,IAClBb,EAASS,MAEV,CAACT,IAEJ,OACEc,sBACEC,UAAYpB,EAAOqB,KACnBC,IAAMhB,GAEJH,EAAMoB,KAAI,SAAAT,GAAQ,OAClBK,sBACEK,IAAMV,EACNW,QAAUb,EAAcE,GACxBY,WAAad,EAAcE,GAC3Ba,KAAK,eACLP,UAAYtB,EAAG,SAAU,CAAE8B,OAAQxB,IAAUU,IAE7Ce,SAAW,GAETf,MAINK,uBAAKC,UAAYpB,EAAO8B,SAG9B"}