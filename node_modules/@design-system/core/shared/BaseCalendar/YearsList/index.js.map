{"version":3,"file":"index.js","sources":["../../../../../../shared/BaseCalendar/YearsList/index.tsx"],"sourcesContent":["import React, {\n  ReactNode,\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState\n} from 'react';\nimport debounce from 'lodash.debounce';\nimport { YearsListProps } from 'shared/types/calendar';\n\nimport { getYearByScroll } from '../utils';\nimport Year from './Year';\n\nimport styles from './styles.scss';\n\nconst YearsList: React.FC<YearsListProps> = ({\n  active,\n  onYearClick,\n  rowHeight,\n  today,\n  years\n}) => {\n  const PADDING_TOP = useMemo(() => rowHeight * 5, [rowHeight]);\n  const PADDING_BOTTOM = useMemo(() => rowHeight * 6, [rowHeight]);\n\n  const [initiator, setInitiator] = useState<string | undefined>(undefined);\n\n  const listRef = useRef<HTMLDivElement | null>(null);\n\n  useEffect(() => {\n    if (listRef && active) {\n      setInitiator('outside');\n      const fullYear = active?.getFullYear() ?? new Date().getFullYear();\n      listRef?.current?.scroll({ top: (fullYear - years[0]) * rowHeight });\n    }\n  }, [active, rowHeight, years]);\n\n  const getList = useCallback((): ReactNode => {\n    const list: ReactNode[] = [];\n\n    years.forEach((year: number): void => {\n      const date = new Date(year, 0, 1);\n\n      list.push(\n        <Year\n          key={ year }\n          date={ date }\n          isActive={ active?.getFullYear() === year }\n          isToday={ today.getFullYear() === year }\n          onYearClick={ onYearClick }\n        />\n      );\n    });\n\n    return list;\n  }, [years, active, today, onYearClick]);\n\n  const updateValue = debounce(() => {\n    if (!initiator) {\n      onYearClick(getYearByScroll(listRef.current?.scrollTop, years[0], rowHeight));\n    }\n    setInitiator(undefined);\n  }, 300);\n\n  const handleScroll = useCallback((): void => {\n    updateValue();\n  }, [updateValue]);\n\n  useEffect(() => {\n    const { current } = listRef;\n\n    if (years.length > 0) {\n      current?.addEventListener('scroll', handleScroll);\n    }\n\n    return (): void => {\n      current?.removeEventListener('scroll', handleScroll);\n    };\n  }, [years, initiator, handleScroll]);\n\n  return (\n    <div className={ styles.list } ref={ listRef }>\n      <div className={ styles.padding } style={ { height: PADDING_TOP } } />\n      { getList() }\n      <div className={ styles.padding } style={ { height: PADDING_BOTTOM } } />\n    </div>\n  );\n};\n\nexport default YearsList;\n"],"names":["YearsList","_a","active","onYearClick","rowHeight","today","years","PADDING_TOP","useMemo","PADDING_BOTTOM","_b","useState","undefined","initiator","setInitiator","listRef","useRef","useEffect","fullYear","getFullYear","Date","current","scroll","top","getList","useCallback","list","forEach","year","date","push","React","Year","key","isActive","isToday","updateValue","debounce","getYearByScroll","scrollTop","handleScroll","length","addEventListener","removeEventListener","className","styles","ref","padding","style","height"],"mappings":"mPAgBMA,EAAsC,SAACC,OAC3CC,WACAC,gBACAC,cACAC,UACAC,UAEMC,EAAcC,GAAQ,WAAM,OAAY,EAAZJ,IAAe,CAACA,IAC5CK,EAAiBD,GAAQ,WAAM,OAAY,EAAZJ,IAAe,CAACA,IAE/CM,EAA4BC,OAA6BC,GAAxDC,OAAWC,OAEZC,EAAUC,EAA8B,MAE9CC,GAAU,mBACR,GAAIF,GAAWb,EAAQ,CACrBY,EAAa,WACb,IAAMI,YAAWhB,eAAAA,EAAQiB,8BAAiB,IAAIC,MAAOD,wBACrDJ,eAAAA,EAASM,wBAASC,OAAO,CAAEC,KAAML,EAAWZ,EAAM,IAAMF,OAEzD,CAACF,EAAQE,EAAWE,IAEvB,IAAMkB,EAAUC,GAAY,WAC1B,IAAMC,EAAoB,GAgB1B,OAdApB,EAAMqB,SAAQ,SAACC,GACb,IAAMC,EAAO,IAAIT,KAAKQ,EAAM,EAAG,GAE/BF,EAAKI,KACHC,gBAACC,GACCC,IAAML,EACNC,KAAOA,EACPK,UAAWhC,eAAAA,EAAQiB,iBAAkBS,EACrCO,QAAU9B,EAAMc,gBAAkBS,EAClCzB,YAAcA,QAKbuB,IACN,CAACpB,EAAOJ,EAAQG,EAAOF,IAEpBiC,EAAcC,GAAS,iBACtBxB,GACHV,EAAYmC,YAAgBvB,EAAQM,8BAASkB,UAAWjC,EAAM,GAAIF,IAEpEU,OAAaF,KACZ,KAEG4B,EAAef,GAAY,WAC/BW,MACC,CAACA,IAcJ,OAZAnB,GAAU,WACA,IAAAI,EAAYN,UAMpB,OAJIT,EAAMmC,OAAS,IACjBpB,SAAAA,EAASqB,iBAAiB,SAAUF,IAG/B,WACLnB,SAAAA,EAASsB,oBAAoB,SAAUH,MAExC,CAAClC,EAAOO,EAAW2B,IAGpBT,uBAAKa,UAAYC,EAAOnB,KAAOoB,IAAM/B,GACnCgB,uBAAKa,UAAYC,EAAOE,QAAUC,MAAQ,CAAEC,OAAQ1C,KAClDiB,IACFO,uBAAKa,UAAYC,EAAOE,QAAUC,MAAQ,CAAEC,OAAQxC,KAG1D"}