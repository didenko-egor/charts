import e,{useContext as n,useState as t,useMemo as i,useRef as o,useCallback as r}from"react";import l from"classnames/bind";import{InputWrapper as u}from"../InputWrapper/index.js";import{useFormContext as d}from"../Form/formContext.js";import{WithIcons as s}from"./WithIcons/index.js";import{InputWrapperContext as a}from"../InputWrapper/InputWrapperContext.js";import p from"../WrappedComponent/index.js";var c={size:"default",disabled:!1,showHint:!1,isError:!1,labelAside:!1,pseudo:!1,uncontrolled:!1,dummyWrapper:!1,inputType:"text",value:"",isMourning:!1},m=function(e,n,t,i,o,r){if(n||t){var l="calc("+(o?4:e)+"px + "+(n||t)+"px)";return r?{paddingLeft:l}:{paddingRight:l}}return i?{paddingBottom:"calc("+e+"px + "+i+"px)"}:null},v=function(v){var f,h,b,y,g=v.inputElement,x=void 0===g?"input":g,E=v.id,W=v.dataTestId,C=v.placeholder,w=v.inputRef,I=v.name,M=v.icons,L=v.label,A=v.hint,B=v.styles,z=v.wrapperStyles,D=v.iconsStyles,j=v.labelWidth,F=v.maxLength,H=v.counter,S=v.fieldName,T=v.withoutDefaultMinWidth,K=v.autoFocus,N=v.isSelect,R=v.iconsLeft,k=v.uncontrolled,P=void 0===k?c.uncontrolled:k,_=v.value,O=void 0===_?c.value:_,Z=v.size,q=void 0===Z?c.size:Z,G=v.isError,J=void 0===G?c.isError:G,Q=v.disabled,U=void 0===Q?c.disabled:Q,V=v.pseudo,X=void 0===V?c.pseudo:V,Y=v.labelAside,$=void 0===Y?c.labelAside:Y,ee=v.showHint,ne=void 0===ee?c.showHint:ee,te=v.dummyWrapper,ie=void 0===te?c.dummyWrapper:te,oe=v.inputType,re=void 0===oe?c.inputType:oe,le=v.isMourning,ue=void 0===le?c.isMourning:le,de=v.onChange,se=v.onBlur,ae=v.onFocus,pe=v.onKeyDown,ce=v.onContextMenu,me=v.onClick,ve=v.onKeyPress,fe=v.children,he=null!==(h=null===(f=n(a))||void 0===f?void 0:f.size)&&void 0!==h?h:q,be=d({labelWidth:j,labelAside:$,size:he}),ye=be.LABEL_WIDTH,ge=be.LABEL_ASIDE,xe=be.SIZE,Ee=t(!1),We=Ee[0],Ce=Ee[1],we=t(!1),Ie=we[0],Me=we[1],Le=ue&&!J&&!(We||Ie),Ae=function(e){return Ce("mouseenter"===e.type)},Be=function(e){var n={focus:ae,blur:se}[e.type];n&&n(e),Me("focus"===e.type)},ze=i((function(){return l.bind(B)}),[B]),De=F&&F>0?O.slice(0,F):O,je=P?void 0:De,Fe=i((function(){return ze?ze("input","input--"+xe,{"input--error":J,"input--disabled":U,"input--high":"textarea"===x,"input--pseudo":X,"input--select":N}):""}),[ze,xe,J,U,x,X,N]),He=t(0),Se=He[0],Te=He[1],Ke=o(null),Ne=i((function(){return"small"===xe?8:12}),[xe]),Re=H&&"input"===x?Number(null===(b=Ke.current)||void 0===b?void 0:b.getBoundingClientRect().width)+Ne:0,ke=H&&"textarea"===x?Number(null===(y=Ke.current)||void 0===y?void 0:y.getBoundingClientRect().height)+8:0,Pe=i((function(){return"small"===xe?28:34}),[xe]),_e=i((function(){return(null==M?void 0:M.length)?M.length*Pe:0}),[M,Pe]),Oe=r((function(e){var n=e.target.value;Te(n.length),de&&de(n,S)}),[S,de]);return e.createElement(u,{label:L,labelAside:ge,isError:J,showHint:ne,hint:A,size:xe,disabled:U,styles:z,filled:Boolean(Se),labelWidth:ye,dummyWrapper:ie,withoutDefaultMinWidth:T,isMourning:Le},e.createElement(s,{icons:M,disabled:U,styles:D,size:xe,inputElement:x,iconsLeft:R,counter:e.createElement(p,{ref:Ke},H)},e.createElement(x,{"data-test-id":W,ref:w,className:Fe,style:m(Ne,_e,Re,ke,T,R),name:I,placeholder:C,type:re,id:E,value:je,disabled:U,readOnly:X,autoComplete:"off",autoFocus:K,tabIndex:K&&"div"===x?0:void 0,onInput:Oe,onFocus:Be,onBlur:Be,onClick:me,onKeyPress:ve,onKeyDown:pe,onContextMenu:ce,onMouseEnter:Ae,onMouseLeave:Ae},"div"===x?fe:void 0)))};export{v as BaseInput,c as DEFAULT_PROPS};
//# sourceMappingURL=index.js.map
