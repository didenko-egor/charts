import n,{createRef as e,useState as o,useRef as r,useEffect as t,cloneElement as i,Children as u}from"react";import{createPortal as s}from"react-dom";import{v4 as m}from"uuid";import p from"./ContextMenuProvider.js";import{useClickOutsideMenu as c}from"./utils/useClickOutsideMenu.js";import{calculateMenuPosition as l}from"./utils/position.js";import{recursiveMap as f}from"./utils/recursiveMap.js";import d from"./Menu/index.js";import a from"./Menu/Item/index.js";function h(n,e){return e.type===d?function(n,e){var o=n.size,r=n.menuStamp,t=e.props.children.some((function(n){return n.props.Icon})),s=m();return i(e,{size:o,menuStamp:r},u.map(e.props.children,(function(n){return i(n,{withIcons:t,menuId:s})})))}(n,e):e.type===a?function(n,e){var o=n.children,r=n.size,t=n.onClose,u=o.some((function(n){return n.props.Icon})),s={size:r,id:m(),withIcons:u,withSubmenu:Boolean(e.props.children)};return s.withSubmenu||(e.props.onClick&&(s.onClick=function(){e.props.onClick(),t&&t()}),e.props.onMouseDown&&(s.onMouseDown=function(){e.props.onMouseDown(),t&&t()})),i(e,s)}(n,e):i(e)}function v(i){var u=i.size,m=void 0===u?"default":u,v=i.mousePosition,w=i.onClose,C=i.children,M=e(),z=o(void 0),S=z[0],j=z[1],I=r(Date.now().toString());if(c(I.current,w),t((function(){if(v&&M.current&&!S){var n="default"===m?44*C.length+16:40*C.length,e=l(M.current,v,n);j(e)}return function(){S&&j(void 0)}}),[v,M,S,m,C.length]),!v)return null;var y=h.bind(null,{children:C,size:m,menuStamp:I.current,onClose:w,menuType:d,itemType:a});return s(n.createElement(p,null,n.createElement(d,{ref:M,size:m,menuPosition:S,menuStamp:I.current},f(C,y))),document.body)}export{v as ContextMenuView};
//# sourceMappingURL=ContextMenuView.js.map
