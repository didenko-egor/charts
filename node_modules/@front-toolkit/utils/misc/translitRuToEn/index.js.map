{"version":3,"file":"index.js","sources":["../../../src/misc/translitRuToEn/index.ts"],"sourcesContent":["// Донор - старая админка, функция toSlug: tass-admin/js/admin/O_o.js\n// Дока с требованиями https://confluence.corp.tass.ru/pages/viewpage.action?pageId=203164238\n// Юникоды пробелов https://jkorpela.fi/chars/spaces.html\n// Юникоды дефисов https://jkorpela.fi/dashes.html\n\nconst RuMap: Record<string, string> = {\n  а: 'a',\n  б: 'b',\n  в: 'v',\n  г: 'g',\n  д: 'd',\n  е: 'e',\n  ё: 'e',\n  ж: 'zh',\n  з: 'z',\n  и: 'i',\n  й: 'y',\n  к: 'k',\n  л: 'l',\n  м: 'm',\n  н: 'n',\n  о: 'o',\n  п: 'p',\n  р: 'r',\n  с: 's',\n  т: 't',\n  у: 'u',\n  ф: 'f',\n  х: 'h',\n  ц: 'c',\n  ч: 'ch',\n  ш: 'sh',\n  щ: 'sch',\n  ъ: '',\n  ы: 'y',\n  ь: '',\n  э: 'e',\n  ю: 'yu',\n  я: 'ya'\n};\n\n/**\n * | Code(16) | Code(10) | Name of the character             | Width of the character                               |\n * |:---------|:---------|:----------------------------------|:-----------------------------------------------------|\n * | U+0020   | 32       | SPACE                             | Depends on font, typically 1/4 em, often adjusted    |\n * | U+00A0   | 160      | NO-BREAK SPACE                    | As a space, but often not adjusted                   |\n * | U+1680   | 5760     | OGHAM SPACE MARK                  | Unspecified; usually not really a space but a dash   |\n * | U+180E   | 6158     | MONGOLIAN VOWEL SEPARATOR         | 0                                                    |\n * | U+2000   | 8192     | EN QUAD                           | 1 en (= 1/2 em)                                      |\n * | U+2001   | 8193     | EM QUAD                           | 1 em (nominally, the height of the font)             |\n * | U+2002   | 8194     | EN SPACE (nut)                    | 1 en (= 1/2 em)                                      |\n * | U+2003   | 8195     | EM SPACE (mutton)                 | 1 em                                                 |\n * | U+2004   | 8196     | THREE-PER-EM SPACE (thick space)  | 1/3 em                                               |\n * | U+2005   | 8197     | FOUR-PER-EM SPACE (mid space)     | 1/4 em                                               |\n * | U+2006   | 8198     | SIX-PER-EM SPACE                  | 1/6 em                                               |\n * | U+2007   | 8199     | FIGURE SPACE                      | “Tabular width”, the width of digits                 |\n * | U+2008   | 8200     | PUNCTUATION SPACE                 | The width of a period “.”                            |\n * | U+2009   | 8201     | THIN SPACE                        | 1/5 em (or sometimes 1/6 em)                         |\n * | U+200A   | 8202     | HAIR SPACE                        | Narrower than THIN SPACE                             |\n * | U+200B   | 8203     | ZERO WIDTH SPACE                  | 0                                                    |\n * | U+202F   | 8239     | NARROW NO-BREAK SPACE             | “typically the width of a thin space or a mid space” |\n * | U+205F   | 8287     | MEDIUM MATHEMATICAL SPACE         | 4/18 em                                              |\n * | U+3000   | 12288    | IDEOGRAPHIC SPACE                 | The width of ideographic (CJK) characters.           |\n * | U+FEFF   | 65279    | ZERO WIDTH NO-BREAK SPACE         | 0                                                    |\n */\nconst spaceCharacters = [32, 160, 5760, 6158, 8192, 8193, 8194, 8195, 8196,\n  8197, 8198, 8199, 8200, 8201, 8202, 8203, 8239, 8287, 12288, 65279];\n\n/**\n * | Code(16) | Code(10) | Name of the character       |\n * |:---------|:---------|:----------------------------|\n * | U+002D   | 45       | hyphen-minus                |\n * | U+00AD   | 173      | soft hyphen                 |\n * | U+05BE   | 1470     | hebrew punctuation maqaf    |\n * | U+1806   | 6150     | mongolian todo soft hyphen  |\n * | U+2010   | 8208     | hyphen                      |\n * | U+2011   | 8209     | non-breaking hyphen         |\n * | U+2012   | 8210     | figure dash                 |\n * | U+2013   | 8211     | en dash                     |\n * | U+2014   | 8212     | em dash                     |\n * | U+2015   | 8213     | horizontal bar              |\n * | U+2212   | 8722     | minus sign                  |\n * | U+2E3A   | 11834    | two-em dash                 |\n * | U+2E3B   | 11835    | three-em dash               |\n * | U+FE58   | 65112    | small em dash               |\n * | U+FE63   | 65123    | small hyphen-minus          |\n * | U+FF0D   | 65293    | fullwidth hyphen-minus      |\n */\nconst dashCharacters = [45, 173, 1470, 6150, 8208, 8209, 8210, 8211, 8212,\n  8213, 8722, 11834, 11835, 65112, 65123, 65293];\n\n/** Транслитит 1 символ\n * @param {string} chr исходный символ\n * @returns сконвертированный символ\n */\nexport const convertCharRuToEn = (chr: string): string => {\n  const trChar = RuMap[chr] ?? chr;\n\n  const code = trChar.charCodeAt(0);\n\n  /** Пробел или дефис заменяем дефисом */\n  if (spaceCharacters.includes(code) || dashCharacters.includes(code)) {\n    return '-';\n  }\n\n  // Игнорируем символы .,!@#$%^&*(_+!\"№;%:?*)_=\n  if ((code >= 33 && code <= 47 && code !== 45)\n    || (code >= 58 && code <= 64)\n    || (code >= 91 && code <= 96)\n    || (code >= 123 && code <= 126)\n    || code >= 1072\n  ) {\n    return '';\n  }\n\n  return trChar;\n};\n\n/**\n * Транслитит строку символов, исключая недопустимые символы и заменяя кириллицу латиницей\n * @param value исходная строка\n * @returns сконвертированная строка\n */\nexport const translitRuToEn = (value: string, trimInitialValue?: boolean): string => (\n  trimInitialValue ? value.trim() : value)\n  .toLowerCase()\n  .split('')\n  .map(convertCharRuToEn)\n  .join('')\n  .replace(/-{2,}/g, '-');// несколько идущих подряд тире заменяются одним ('---' => '-');\n"],"names":["RuMap","spaceCharacters","dashCharacters","convertCharRuToEn","chr","trChar","_a","code","charCodeAt","includes","translitRuToEn","value","trimInitialValue","trim","toLowerCase","split","map","join","replace"],"mappings":"AAKA,IAAMA,EAAgC,CACpC,IAAG,IACH,IAAG,IACH,IAAG,IACH,IAAG,IACH,IAAG,IACH,IAAG,IACH,IAAG,IACH,IAAG,KACH,IAAG,IACH,IAAG,IACH,IAAG,IACH,IAAG,IACH,IAAG,IACH,IAAG,IACH,IAAG,IACH,IAAG,IACH,IAAG,IACH,IAAG,IACH,IAAG,IACH,IAAG,IACH,IAAG,IACH,IAAG,IACH,IAAG,IACH,IAAG,IACH,IAAG,KACH,IAAG,KACH,IAAG,MACH,IAAG,GACH,IAAG,IACH,IAAG,GACH,IAAG,IACH,IAAG,KACH,IAAG,MA2BCC,EAAkB,CAAC,GAAI,IAAK,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KACpE,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,MAAO,OAsBzDC,EAAiB,CAAC,GAAI,IAAK,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KACnE,KAAM,KAAM,MAAO,MAAO,MAAO,MAAO,OAM7BC,EAAoB,SAACC,SAC1BC,EAAuB,QAAdC,EAAAN,EAAMI,UAAQ,IAAAE,EAAAA,EAAAF,EAEvBG,EAAOF,EAAOG,WAAW,GAG/B,OAAIP,EAAgBQ,SAASF,IAASL,EAAeO,SAASF,GACrD,IAIJA,GAAQ,IAAMA,GAAQ,IAAe,KAATA,GAC3BA,GAAQ,IAAMA,GAAQ,IACtBA,GAAQ,IAAMA,GAAQ,IACtBA,GAAQ,KAAOA,GAAQ,KACxBA,GAAQ,KAEJ,GAGFF,GAQIK,EAAiB,SAACC,EAAeC,GAAuC,OACnFA,EAAmBD,EAAME,OAASF,GACjCG,cACAC,MAAM,IACNC,IAAIb,GACJc,KAAK,IACLC,QAAQ,SAAU"}